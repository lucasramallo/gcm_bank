# Documento de Solicitação de Mudança

## Informações Gerais
- **Solicitante**: Álvaro Magnum Barbosa Neto
- **Data da Solicitação**: 31 de Outubro de 2025
- **Sistema**: GCM Bank 
- **Número da Solicitação**: SM-2025-002
- **Título da Mudança**: Atualização da Tela de Login com Seleção de Banco (Caixa ou Banco do Brasil) e Estratégias de Criptografia Específicas

## Descrição da Mudança
A mudança solicitada envolve a atualização da tela inicial de login já implementada (conforme SM-2025-001), adicionando uma opção de seleção de banco entre **Caixa** e **Banco do Brasil**. Dependendo do banco escolhido, será aplicada uma estratégia de criptografia distinta para os dados de autenticação (usuário e senha):

- **Caixa**: Utilizar `CryptoJS.AES.encrypt` para criptografia simétrica dos dados.
- **Banco do Brasil**: Utilizar `CryptoJS.SHA256` para hash dos dados antes do envio.

A funcionalidade será integrada de forma consistente nas plataformas **mobile**, **web** e **desktop**, mantendo a interface unificada, indicadores visuais de segurança e validação de credenciais.

### Objetivos da Mudança
- Adicionar seletor de banco (Caixa ou Banco do Brasil) na tela de login.
- Implementar lógica condicional para aplicar a criptografia correta com base no banco selecionado.
- Garantir que a criptografia seja executada no front-end antes do envio ao back-end, com feedback visual ao usuário (ex.: ícone de cadeado com tipo de criptografia).
- Manter compatibilidade total com mobile (React Native), web (React) e desktop (Electron).
- Atualizar documentação interna e testes automatizados para cobrir os dois fluxos de criptografia.

## Justificativa
A solicitação atende à necessidade do cliente de suportar múltiplas instituições financeiras no mesmo sistema, com requisitos de segurança específicos por banco. A **Caixa** exige criptografia simétrica (AES) para conformidade com padrões internos de proteção de dados em trânsito, enquanto o **Banco do Brasil** adota hash SHA-256 como medida de integridade e ofuscação. Essa diferenciação é essencial para aprovação regulatória e integração com APIs bancárias distintas.

## Escopo da Mudança
### Inclusões
- Campo de seleção (dropdown ou radio buttons) para escolha entre **Caixa** e **Banco do Brasil** na tela de login.
- Lógica condicional no front-end para aplicar:
  - `CryptoJS.AES.encrypt(dados, chave)` → para **Caixa**
  - `CryptoJS.SHA256(dados)` → para **Banco do Brasil**
- Indicadores visuais dinâmicos mostrando o tipo de criptografia em uso (ex.: “AES Ativo” ou “SHA-256 Ativo”).
- Atualização da validação de entrada para garantir que a criptografia seja aplicada antes do envio.
- Testes unitários e de integração para ambos os fluxos em todas as plataformas.

### Exclusões
- Não inclui alterações no back-end (o servidor receberá os dados já processados conforme o padrão do banco).
- Não altera o design visual geral da tela (apenas adição do seletor e indicadores).

## Impactos Esperados
- **Técnicos**: 
  - Inclusão da biblioteca `CryptoJS` (já presente ou a ser adicionada).
  - Atualização dos componentes de login em React, React Native e Electron.
  - Criação de serviço reutilizável de criptografia com estratégia por banco.
- **Operacionais**: 
  - Atualização do manual do usuário com instruções sobre escolha do banco.
  - Treinamento breve para equipe de suporte sobre os dois fluxos.
- **Tempo Estimado**: 6 dias úteis (análise, desenvolvimento, testes e implantação).
- **Recursos Necessários**: 
  - 1 desenvolvedor front-end pleno (com experiência nas três plataformas).
  - Ferramentas: VS Code, npm/yarn, Jest (testes), Storybook (validação visual).

## Riscos Identificados
- **Risco**: Erro na aplicação da criptografia errada por falha na detecção do banco selecionado.  
  - **Mitigação**: Testes automatizados com cobertura de 100% nos fluxos de Caixa e BB; validação dupla no front-end.
  
- **Risco**: Inconsistência visual ou de comportamento entre plataformas.  
  - **Mitigação**: Uso de componentes compartilhados via monorepo e testes em dispositivos reais (iOS, Android, navegadores, desktop).

## Plano de Implementação
1. **Análise e design do seletor e indicadores** (1 dia).
2. **Desenvolvimento do seletor de banco e lógica de criptografia condicional** (2 dias).
3. **Integração nas três plataformas (mobile, web, desktop)** (1 dia).
4. **Testes funcionais, de segurança e usabilidade** (1,5 dias).
5. **Implantação em ambiente de homologação e produção** (0,5 dia).

## Aprovação
- **Responsável pela Aprovação**: João Lucas de Brito Ramalho Silva
- **Status**: Pendente
- **Data de Aprovação**: Aguardando